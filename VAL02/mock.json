{"format_version":"1.2","terraform_version":"1.5.7","variables":{"instance-prefix":{"value":"lab-template-"},"lab-project":{"value":"\u003cyour project id\u003e"},"lab-region":{"value":"us-east1"},"lab-zone":{"value":"us-east1-b"},"machine-type":{"value":"e2-small"}},"planned_values":{"outputs":{"lb-ip":{"sensitive":false}},"root_module":{"resources":[{"address":"google_compute_autoscaler.lab_autoscaler","mode":"managed","type":"google_compute_autoscaler","name":"lab_autoscaler","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"autoscaling_policy":[{"cooldown_period":60,"load_balancing_utilization":[{"target":0.5}],"max_replicas":5,"metric":[],"min_replicas":2,"mode":"ON","scale_in_control":[],"scaling_schedules":[]}],"description":null,"name":"lab-autoscaler","project":"\u003cyour project id\u003e","timeouts":null,"zone":"us-east1-b"},"sensitive_values":{"autoscaling_policy":[{"cpu_utilization":[],"load_balancing_utilization":[{}],"metric":[],"scale_in_control":[],"scaling_schedules":[]}]}},{"address":"google_compute_backend_service.backend_service","mode":"managed","type":"google_compute_backend_service","name":"backend_service","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"affinity_cookie_ttl_sec":null,"backend":[{"balancing_mode":"UTILIZATION","capacity_scaler":1,"description":""}],"circuit_breakers":[],"compression_mode":null,"connection_draining_timeout_sec":300,"consistent_hash":[],"custom_request_headers":null,"custom_response_headers":null,"description":null,"edge_security_policy":null,"enable_cdn":null,"ip_address_selection_policy":null,"load_balancing_scheme":"EXTERNAL_MANAGED","locality_lb_policies":[],"locality_lb_policy":null,"name":"backend","outlier_detection":[],"port_name":"http","project":"\u003cyour project id\u003e","protocol":"HTTP","security_policy":null,"security_settings":[],"service_lb_policy":null,"strong_session_affinity_cookie":[],"timeout_sec":10,"timeouts":null},"sensitive_values":{"backend":[{}],"cdn_policy":[],"circuit_breakers":[],"consistent_hash":[],"health_checks":[],"iap":[],"locality_lb_policies":[],"log_config":[],"outlier_detection":[],"security_settings":[],"strong_session_affinity_cookie":[]}},{"address":"google_compute_global_forwarding_rule.http_forwarding","mode":"managed","type":"google_compute_global_forwarding_rule","name":"http_forwarding","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":null,"ip_protocol":"TCP","ip_version":null,"labels":null,"load_balancing_scheme":"EXTERNAL_MANAGED","metadata_filters":[],"name":"global-rule","no_automate_dns_zone":null,"port_range":"80","project":"\u003cyour project id\u003e","source_ip_ranges":null,"timeouts":null},"sensitive_values":{"effective_labels":{},"metadata_filters":[],"service_directory_registrations":[],"terraform_labels":{}}},{"address":"google_compute_health_check.lab_health_check","mode":"managed","type":"google_compute_health_check","name":"lab_health_check","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"check_interval_sec":5,"description":null,"grpc_health_check":[],"healthy_threshold":2,"http2_health_check":[],"http_health_check":[{"host":null,"port":80,"port_name":null,"port_specification":null,"proxy_header":"NONE","request_path":"/","response":null}],"https_health_check":[],"name":"lab-http-check","project":"\u003cyour project id\u003e","source_regions":null,"ssl_health_check":[],"tcp_health_check":[],"timeout_sec":5,"timeouts":null,"unhealthy_threshold":2},"sensitive_values":{"grpc_health_check":[],"http2_health_check":[],"http_health_check":[{}],"https_health_check":[],"log_config":[],"ssl_health_check":[],"tcp_health_check":[]}},{"address":"google_compute_instance_group_manager.lab_mig","mode":"managed","type":"google_compute_instance_group_manager","name":"lab_mig","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"all_instances_config":[],"auto_healing_policies":[{"initial_delay_sec":120}],"base_instance_name":"vm","description":null,"list_managed_instances_results":"PAGELESS","name":"lab-mig","named_port":[{"name":"http","port":80}],"project":"\u003cyour project id\u003e","stateful_disk":[],"stateful_external_ip":[],"stateful_internal_ip":[],"target_pools":null,"target_size":2,"timeouts":null,"version":[{"name":null,"target_size":[]}],"wait_for_instances":false,"wait_for_instances_status":"STABLE","zone":"us-east1-b"},"sensitive_values":{"all_instances_config":[],"auto_healing_policies":[{}],"instance_lifecycle_policy":[],"named_port":[{}],"standby_policy":[],"stateful_disk":[],"stateful_external_ip":[],"stateful_internal_ip":[],"status":[],"update_policy":[],"version":[{"target_size":[]}]}},{"address":"google_compute_instance_template.lab_instance_template","mode":"managed","type":"google_compute_instance_template","name":"lab_instance_template","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"advanced_machine_features":[],"can_ip_forward":false,"description":null,"disk":[{"auto_delete":true,"boot":true,"disk_encryption_key":[],"disk_name":null,"labels":null,"mode":"READ_WRITE","resource_manager_tags":null,"resource_policies":null,"source":null,"source_image":"projects/debian-cloud/global/images/family/debian-11","source_image_encryption_key":[],"source_snapshot":null,"source_snapshot_encryption_key":[],"type":"PERSISTENT"}],"effective_labels":{"goog-terraform-provisioned":"true"},"guest_accelerator":[],"instance_description":null,"key_revocation_action_type":null,"labels":null,"machine_type":"e2-small","metadata":{"startup-script":"#! /bin/bash\n     sudo apt-get update\n     sudo apt-get install apache2 -y\n     sudo a2ensite default-ssl\n     sudo a2enmod ssl\n     vm_hostname=\"$(curl -H \"Metadata-Flavor:Google\" \\\n   http://169.254.169.254/computeMetadata/v1/instance/name)\"\n   sudo echo \"Page served from: $vm_hostname\" | \\\n   tee /var/www/html/index.html\n   sudo systemctl restart apache2"},"metadata_startup_script":null,"min_cpu_platform":null,"name_prefix":"lab-template-","network_interface":[{"access_config":[],"alias_ip_range":[],"ipv6_access_config":[],"network_ip":null,"nic_type":null,"queue_count":null}],"network_performance_config":[],"project":"\u003cyour project id\u003e","reservation_affinity":[],"resource_manager_tags":null,"resource_policies":null,"service_account":[],"shielded_instance_config":[],"tags":["allow-health-check"],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"sensitive_values":{"advanced_machine_features":[],"confidential_instance_config":[],"disk":[{"disk_encryption_key":[],"source_image_encryption_key":[],"source_snapshot_encryption_key":[]}],"effective_labels":{},"guest_accelerator":[],"metadata":{},"network_interface":[{"access_config":[],"alias_ip_range":[],"ipv6_access_config":[]}],"network_performance_config":[],"reservation_affinity":[],"scheduling":[],"service_account":[],"shielded_instance_config":[],"tags":[false],"terraform_labels":{}}},{"address":"google_compute_target_http_proxy.http_proxy","mode":"managed","type":"google_compute_target_http_proxy","name":"http_proxy","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":null,"http_keep_alive_timeout_sec":null,"name":"http-lb-proxy","project":"\u003cyour project id\u003e","timeouts":null},"sensitive_values":{}},{"address":"google_compute_url_map.http_url_map","mode":"managed","type":"google_compute_url_map","name":"http_url_map","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"default_route_action":[],"default_url_redirect":[],"description":null,"header_action":[],"host_rule":[],"name":"url-map-target-proxy","path_matcher":[],"project":"\u003cyour project id\u003e","test":[],"timeouts":null},"sensitive_values":{"default_route_action":[],"default_url_redirect":[],"header_action":[],"host_rule":[],"path_matcher":[],"test":[]}}],"child_modules":[{"resources":[{"address":"module.vpc.google_compute_firewall.default","mode":"managed","type":"google_compute_firewall","name":"default","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"allow":[{"ports":["80"],"protocol":"tcp"}],"deny":[],"description":null,"direction":"INGRESS","disabled":null,"log_config":[],"name":"fw-allow-health-check","priority":1000,"project":"\u003cyour project id\u003e","source_ranges":["130.211.0.0/22","35.191.0.0/16"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-health-check"],"timeouts":null},"sensitive_values":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false,false],"target_tags":[false]}},{"address":"module.vpc.google_compute_global_address.lab_lb_ip","mode":"managed","type":"google_compute_global_address","name":"lab_lb_ip","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"address_type":null,"description":null,"effective_labels":{"goog-terraform-provisioned":"true"},"ip_version":null,"labels":null,"name":"lb-ipv4-1","network":null,"project":"\u003cyour project id\u003e","purpose":null,"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"sensitive_values":{"effective_labels":{},"terraform_labels":{}}},{"address":"module.vpc.google_compute_network.lab_vpc","mode":"managed","type":"google_compute_network","name":"lab_vpc","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"auto_create_subnetworks":false,"delete_default_routes_on_create":false,"description":null,"enable_ula_internal_ipv6":null,"name":"lab-vpc","network_firewall_policy_enforcement_order":"AFTER_CLASSIC_FIREWALL","project":"\u003cyour project id\u003e","timeouts":null},"sensitive_values":{}},{"address":"module.vpc.google_compute_router.lab_router","mode":"managed","type":"google_compute_router","name":"lab_router","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"bgp":[],"description":null,"encrypted_interconnect_router":null,"name":"lab-router","network":"lab-vpc","project":"\u003cyour project id\u003e","region":"us-east1","timeouts":null},"sensitive_values":{"bgp":[]}},{"address":"module.vpc.google_compute_router_nat.nat","mode":"managed","type":"google_compute_router_nat","name":"nat","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"icmp_idle_timeout_sec":30,"initial_nat_ips":null,"log_config":[],"max_ports_per_vm":null,"name":"my-router-nat","nat_ip_allocate_option":"AUTO_ONLY","project":"\u003cyour project id\u003e","region":"us-east1","router":"lab-router","rules":[],"source_subnetwork_ip_ranges_to_nat":"ALL_SUBNETWORKS_ALL_IP_RANGES","subnetwork":[],"tcp_established_idle_timeout_sec":1200,"tcp_time_wait_timeout_sec":120,"tcp_transitory_idle_timeout_sec":30,"timeouts":null,"udp_idle_timeout_sec":30},"sensitive_values":{"drain_nat_ips":[],"endpoint_types":[],"log_config":[],"nat_ips":[],"rules":[],"subnetwork":[]}},{"address":"module.vpc.google_compute_subnetwork.lab_subnet","mode":"managed","type":"google_compute_subnetwork","name":"lab_subnet","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":null,"ip_cidr_range":"10.0.1.0/24","ipv6_access_type":null,"log_config":[],"name":"lab-subnet","project":"\u003cyour project id\u003e","region":"us-east1","reserved_internal_range":null,"role":null,"send_secondary_ip_range_if_empty":null,"timeouts":null},"sensitive_values":{"log_config":[],"secondary_ip_range":[]}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"google_compute_autoscaler.lab_autoscaler","mode":"managed","type":"google_compute_autoscaler","name":"lab_autoscaler","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"autoscaling_policy":[{"cooldown_period":60,"load_balancing_utilization":[{"target":0.5}],"max_replicas":5,"metric":[],"min_replicas":2,"mode":"ON","scale_in_control":[],"scaling_schedules":[]}],"description":null,"name":"lab-autoscaler","project":"\u003cyour project id\u003e","timeouts":null,"zone":"us-east1-b"},"after_unknown":{"autoscaling_policy":[{"cpu_utilization":true,"load_balancing_utilization":[{}],"metric":[],"scale_in_control":[],"scaling_schedules":[]}],"creation_timestamp":true,"id":true,"self_link":true,"target":true},"before_sensitive":false,"after_sensitive":{"autoscaling_policy":[{"cpu_utilization":[],"load_balancing_utilization":[{}],"metric":[],"scale_in_control":[],"scaling_schedules":[]}]}}},{"address":"google_compute_backend_service.backend_service","mode":"managed","type":"google_compute_backend_service","name":"backend_service","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"affinity_cookie_ttl_sec":null,"backend":[{"balancing_mode":"UTILIZATION","capacity_scaler":1,"description":""}],"circuit_breakers":[],"compression_mode":null,"connection_draining_timeout_sec":300,"consistent_hash":[],"custom_request_headers":null,"custom_response_headers":null,"description":null,"edge_security_policy":null,"enable_cdn":null,"ip_address_selection_policy":null,"load_balancing_scheme":"EXTERNAL_MANAGED","locality_lb_policies":[],"locality_lb_policy":null,"name":"backend","outlier_detection":[],"port_name":"http","project":"\u003cyour project id\u003e","protocol":"HTTP","security_policy":null,"security_settings":[],"service_lb_policy":null,"strong_session_affinity_cookie":[],"timeout_sec":10,"timeouts":null},"after_unknown":{"backend":[{"group":true,"max_connections":true,"max_connections_per_endpoint":true,"max_connections_per_instance":true,"max_rate":true,"max_rate_per_endpoint":true,"max_rate_per_instance":true,"max_utilization":true}],"cdn_policy":true,"circuit_breakers":[],"consistent_hash":[],"creation_timestamp":true,"fingerprint":true,"generated_id":true,"health_checks":true,"iap":true,"id":true,"locality_lb_policies":[],"log_config":true,"outlier_detection":[],"security_settings":[],"self_link":true,"session_affinity":true,"strong_session_affinity_cookie":[]},"before_sensitive":false,"after_sensitive":{"backend":[{}],"cdn_policy":[],"circuit_breakers":[],"consistent_hash":[],"health_checks":[],"iap":[],"locality_lb_policies":[],"log_config":[],"outlier_detection":[],"security_settings":[],"strong_session_affinity_cookie":[]}}},{"address":"google_compute_global_forwarding_rule.http_forwarding","mode":"managed","type":"google_compute_global_forwarding_rule","name":"http_forwarding","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":null,"ip_protocol":"TCP","ip_version":null,"labels":null,"load_balancing_scheme":"EXTERNAL_MANAGED","metadata_filters":[],"name":"global-rule","no_automate_dns_zone":null,"port_range":"80","project":"\u003cyour project id\u003e","source_ip_ranges":null,"timeouts":null},"after_unknown":{"base_forwarding_rule":true,"effective_labels":true,"forwarding_rule_id":true,"id":true,"ip_address":true,"label_fingerprint":true,"metadata_filters":[],"network":true,"network_tier":true,"psc_connection_id":true,"psc_connection_status":true,"self_link":true,"service_directory_registrations":true,"subnetwork":true,"target":true,"terraform_labels":true},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"metadata_filters":[],"service_directory_registrations":[],"terraform_labels":{}}}},{"address":"google_compute_health_check.lab_health_check","mode":"managed","type":"google_compute_health_check","name":"lab_health_check","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"check_interval_sec":5,"description":null,"grpc_health_check":[],"healthy_threshold":2,"http2_health_check":[],"http_health_check":[{"host":null,"port":80,"port_name":null,"port_specification":null,"proxy_header":"NONE","request_path":"/","response":null}],"https_health_check":[],"name":"lab-http-check","project":"\u003cyour project id\u003e","source_regions":null,"ssl_health_check":[],"tcp_health_check":[],"timeout_sec":5,"timeouts":null,"unhealthy_threshold":2},"after_unknown":{"creation_timestamp":true,"grpc_health_check":[],"http2_health_check":[],"http_health_check":[{}],"https_health_check":[],"id":true,"log_config":true,"self_link":true,"ssl_health_check":[],"tcp_health_check":[],"type":true},"before_sensitive":false,"after_sensitive":{"grpc_health_check":[],"http2_health_check":[],"http_health_check":[{}],"https_health_check":[],"log_config":[],"ssl_health_check":[],"tcp_health_check":[]}}},{"address":"google_compute_instance_group_manager.lab_mig","mode":"managed","type":"google_compute_instance_group_manager","name":"lab_mig","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"all_instances_config":[],"auto_healing_policies":[{"initial_delay_sec":120}],"base_instance_name":"vm","description":null,"list_managed_instances_results":"PAGELESS","name":"lab-mig","named_port":[{"name":"http","port":80}],"project":"\u003cyour project id\u003e","stateful_disk":[],"stateful_external_ip":[],"stateful_internal_ip":[],"target_pools":null,"target_size":2,"timeouts":null,"version":[{"name":null,"target_size":[]}],"wait_for_instances":false,"wait_for_instances_status":"STABLE","zone":"us-east1-b"},"after_unknown":{"all_instances_config":[],"auto_healing_policies":[{"health_check":true}],"creation_timestamp":true,"fingerprint":true,"id":true,"instance_group":true,"instance_group_manager_id":true,"instance_lifecycle_policy":true,"named_port":[{}],"operation":true,"self_link":true,"standby_policy":true,"stateful_disk":[],"stateful_external_ip":[],"stateful_internal_ip":[],"status":true,"target_stopped_size":true,"target_suspended_size":true,"update_policy":true,"version":[{"instance_template":true,"target_size":[]}]},"before_sensitive":false,"after_sensitive":{"all_instances_config":[],"auto_healing_policies":[{}],"instance_lifecycle_policy":[],"named_port":[{}],"standby_policy":[],"stateful_disk":[],"stateful_external_ip":[],"stateful_internal_ip":[],"status":[],"update_policy":[],"version":[{"target_size":[]}]}}},{"address":"google_compute_instance_template.lab_instance_template","mode":"managed","type":"google_compute_instance_template","name":"lab_instance_template","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"advanced_machine_features":[],"can_ip_forward":false,"description":null,"disk":[{"auto_delete":true,"boot":true,"disk_encryption_key":[],"disk_name":null,"labels":null,"mode":"READ_WRITE","resource_manager_tags":null,"resource_policies":null,"source":null,"source_image":"projects/debian-cloud/global/images/family/debian-11","source_image_encryption_key":[],"source_snapshot":null,"source_snapshot_encryption_key":[],"type":"PERSISTENT"}],"effective_labels":{"goog-terraform-provisioned":"true"},"guest_accelerator":[],"instance_description":null,"key_revocation_action_type":null,"labels":null,"machine_type":"e2-small","metadata":{"startup-script":"#! /bin/bash\n     sudo apt-get update\n     sudo apt-get install apache2 -y\n     sudo a2ensite default-ssl\n     sudo a2enmod ssl\n     vm_hostname=\"$(curl -H \"Metadata-Flavor:Google\" \\\n   http://169.254.169.254/computeMetadata/v1/instance/name)\"\n   sudo echo \"Page served from: $vm_hostname\" | \\\n   tee /var/www/html/index.html\n   sudo systemctl restart apache2"},"metadata_startup_script":null,"min_cpu_platform":null,"name_prefix":"lab-template-","network_interface":[{"access_config":[],"alias_ip_range":[],"ipv6_access_config":[],"network_ip":null,"nic_type":null,"queue_count":null}],"network_performance_config":[],"project":"\u003cyour project id\u003e","reservation_affinity":[],"resource_manager_tags":null,"resource_policies":null,"service_account":[],"shielded_instance_config":[],"tags":["allow-health-check"],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"after_unknown":{"advanced_machine_features":[],"confidential_instance_config":true,"creation_timestamp":true,"disk":[{"device_name":true,"disk_encryption_key":[],"disk_size_gb":true,"disk_type":true,"interface":true,"provisioned_iops":true,"provisioned_throughput":true,"source_image_encryption_key":[],"source_snapshot_encryption_key":[]}],"effective_labels":{},"guest_accelerator":[],"id":true,"metadata":{},"metadata_fingerprint":true,"name":true,"network_interface":[{"access_config":[],"alias_ip_range":[],"internal_ipv6_prefix_length":true,"ipv6_access_config":[],"ipv6_access_type":true,"ipv6_address":true,"name":true,"network":true,"stack_type":true,"subnetwork":true,"subnetwork_project":true}],"network_performance_config":[],"region":true,"reservation_affinity":[],"scheduling":true,"self_link":true,"self_link_unique":true,"service_account":[],"shielded_instance_config":[],"tags":[false],"tags_fingerprint":true,"terraform_labels":{}},"before_sensitive":false,"after_sensitive":{"advanced_machine_features":[],"confidential_instance_config":[],"disk":[{"disk_encryption_key":[],"source_image_encryption_key":[],"source_snapshot_encryption_key":[]}],"effective_labels":{},"guest_accelerator":[],"metadata":{},"network_interface":[{"access_config":[],"alias_ip_range":[],"ipv6_access_config":[]}],"network_performance_config":[],"reservation_affinity":[],"scheduling":[],"service_account":[],"shielded_instance_config":[],"tags":[false],"terraform_labels":{}}}},{"address":"google_compute_target_http_proxy.http_proxy","mode":"managed","type":"google_compute_target_http_proxy","name":"http_proxy","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":null,"http_keep_alive_timeout_sec":null,"name":"http-lb-proxy","project":"\u003cyour project id\u003e","timeouts":null},"after_unknown":{"creation_timestamp":true,"id":true,"proxy_bind":true,"proxy_id":true,"self_link":true,"url_map":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"google_compute_url_map.http_url_map","mode":"managed","type":"google_compute_url_map","name":"http_url_map","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"default_route_action":[],"default_url_redirect":[],"description":null,"header_action":[],"host_rule":[],"name":"url-map-target-proxy","path_matcher":[],"project":"\u003cyour project id\u003e","test":[],"timeouts":null},"after_unknown":{"creation_timestamp":true,"default_route_action":[],"default_service":true,"default_url_redirect":[],"fingerprint":true,"header_action":[],"host_rule":[],"id":true,"map_id":true,"path_matcher":[],"self_link":true,"test":[]},"before_sensitive":false,"after_sensitive":{"default_route_action":[],"default_url_redirect":[],"header_action":[],"host_rule":[],"path_matcher":[],"test":[]}}},{"address":"module.vpc.google_compute_firewall.default","module_address":"module.vpc","mode":"managed","type":"google_compute_firewall","name":"default","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"allow":[{"ports":["80"],"protocol":"tcp"}],"deny":[],"description":null,"direction":"INGRESS","disabled":null,"log_config":[],"name":"fw-allow-health-check","priority":1000,"project":"\u003cyour project id\u003e","source_ranges":["130.211.0.0/22","35.191.0.0/16"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-health-check"],"timeouts":null},"after_unknown":{"allow":[{"ports":[false]}],"creation_timestamp":true,"deny":[],"destination_ranges":true,"enable_logging":true,"id":true,"log_config":[],"network":true,"self_link":true,"source_ranges":[false,false],"target_tags":[false]},"before_sensitive":false,"after_sensitive":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false,false],"target_tags":[false]}}},{"address":"module.vpc.google_compute_global_address.lab_lb_ip","module_address":"module.vpc","mode":"managed","type":"google_compute_global_address","name":"lab_lb_ip","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"address_type":null,"description":null,"effective_labels":{"goog-terraform-provisioned":"true"},"ip_version":null,"labels":null,"name":"lb-ipv4-1","network":null,"project":"\u003cyour project id\u003e","purpose":null,"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"after_unknown":{"address":true,"creation_timestamp":true,"effective_labels":{},"id":true,"label_fingerprint":true,"prefix_length":true,"self_link":true,"terraform_labels":{}},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"terraform_labels":{}}}},{"address":"module.vpc.google_compute_network.lab_vpc","module_address":"module.vpc","mode":"managed","type":"google_compute_network","name":"lab_vpc","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"auto_create_subnetworks":false,"delete_default_routes_on_create":false,"description":null,"enable_ula_internal_ipv6":null,"name":"lab-vpc","network_firewall_policy_enforcement_order":"AFTER_CLASSIC_FIREWALL","project":"\u003cyour project id\u003e","timeouts":null},"after_unknown":{"bgp_always_compare_med":true,"bgp_best_path_selection_mode":true,"bgp_inter_region_cost":true,"gateway_ipv4":true,"id":true,"internal_ipv6_range":true,"mtu":true,"network_id":true,"numeric_id":true,"routing_mode":true,"self_link":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.google_compute_router.lab_router","module_address":"module.vpc","mode":"managed","type":"google_compute_router","name":"lab_router","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"bgp":[],"description":null,"encrypted_interconnect_router":null,"name":"lab-router","network":"lab-vpc","project":"\u003cyour project id\u003e","region":"us-east1","timeouts":null},"after_unknown":{"bgp":[],"creation_timestamp":true,"id":true,"self_link":true},"before_sensitive":false,"after_sensitive":{"bgp":[]}}},{"address":"module.vpc.google_compute_router_nat.nat","module_address":"module.vpc","mode":"managed","type":"google_compute_router_nat","name":"nat","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"icmp_idle_timeout_sec":30,"initial_nat_ips":null,"log_config":[],"max_ports_per_vm":null,"name":"my-router-nat","nat_ip_allocate_option":"AUTO_ONLY","project":"\u003cyour project id\u003e","region":"us-east1","router":"lab-router","rules":[],"source_subnetwork_ip_ranges_to_nat":"ALL_SUBNETWORKS_ALL_IP_RANGES","subnetwork":[],"tcp_established_idle_timeout_sec":1200,"tcp_time_wait_timeout_sec":120,"tcp_transitory_idle_timeout_sec":30,"timeouts":null,"udp_idle_timeout_sec":30},"after_unknown":{"auto_network_tier":true,"drain_nat_ips":true,"enable_dynamic_port_allocation":true,"enable_endpoint_independent_mapping":true,"endpoint_types":true,"id":true,"log_config":[],"min_ports_per_vm":true,"nat_ips":true,"rules":[],"subnetwork":[]},"before_sensitive":false,"after_sensitive":{"drain_nat_ips":[],"endpoint_types":[],"log_config":[],"nat_ips":[],"rules":[],"subnetwork":[]}}},{"address":"module.vpc.google_compute_subnetwork.lab_subnet","module_address":"module.vpc","mode":"managed","type":"google_compute_subnetwork","name":"lab_subnet","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":null,"ip_cidr_range":"10.0.1.0/24","ipv6_access_type":null,"log_config":[],"name":"lab-subnet","project":"\u003cyour project id\u003e","region":"us-east1","reserved_internal_range":null,"role":null,"send_secondary_ip_range_if_empty":null,"timeouts":null},"after_unknown":{"creation_timestamp":true,"external_ipv6_prefix":true,"fingerprint":true,"gateway_address":true,"id":true,"internal_ipv6_prefix":true,"ipv6_cidr_range":true,"log_config":[],"network":true,"private_ip_google_access":true,"private_ipv6_google_access":true,"purpose":true,"secondary_ip_range":true,"self_link":true,"stack_type":true,"subnetwork_id":true},"before_sensitive":false,"after_sensitive":{"log_config":[],"secondary_ip_range":[]}}}],"output_changes":{"lb-ip":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"configuration":{"provider_config":{"google":{"name":"google","full_name":"registry.terraform.io/hashicorp/google","version_constraint":"6.17.0","expressions":{"project":{"references":["var.lab-project"]},"region":{"references":["var.lab-region"]}}}},"root_module":{"outputs":{"lb-ip":{"expression":{"references":["module.vpc.lb-ip","module.vpc"]},"description":"ip of lab load balancer"}},"resources":[{"address":"google_compute_autoscaler.lab_autoscaler","mode":"managed","type":"google_compute_autoscaler","name":"lab_autoscaler","provider_config_key":"google","expressions":{"autoscaling_policy":[{"load_balancing_utilization":[{"target":{"constant_value":0.5}}],"max_replicas":{"constant_value":5},"min_replicas":{"constant_value":2}}],"name":{"constant_value":"lab-autoscaler"},"target":{"references":["google_compute_instance_group_manager.lab_mig.instance_group","google_compute_instance_group_manager.lab_mig"]},"zone":{"references":["var.lab-zone"]}},"schema_version":0},{"address":"google_compute_backend_service.backend_service","mode":"managed","type":"google_compute_backend_service","name":"backend_service","provider_config_key":"google","expressions":{"backend":[{"balancing_mode":{"constant_value":"UTILIZATION"},"capacity_scaler":{"constant_value":1},"group":{"references":["google_compute_instance_group_manager.lab_mig.instance_group","google_compute_instance_group_manager.lab_mig"]}}],"health_checks":{"references":["google_compute_health_check.lab_health_check.id","google_compute_health_check.lab_health_check"]},"load_balancing_scheme":{"constant_value":"EXTERNAL_MANAGED"},"name":{"constant_value":"backend"},"port_name":{"constant_value":"http"},"protocol":{"constant_value":"HTTP"},"timeout_sec":{"constant_value":10}},"schema_version":1},{"address":"google_compute_global_forwarding_rule.http_forwarding","mode":"managed","type":"google_compute_global_forwarding_rule","name":"http_forwarding","provider_config_key":"google","expressions":{"ip_address":{"references":["module.vpc.lb-ip-id","module.vpc"]},"ip_protocol":{"constant_value":"TCP"},"load_balancing_scheme":{"constant_value":"EXTERNAL_MANAGED"},"name":{"constant_value":"global-rule"},"port_range":{"constant_value":"80"},"target":{"references":["google_compute_target_http_proxy.http_proxy.id","google_compute_target_http_proxy.http_proxy"]}},"schema_version":0},{"address":"google_compute_health_check.lab_health_check","mode":"managed","type":"google_compute_health_check","name":"lab_health_check","provider_config_key":"google","expressions":{"http_health_check":[{"port":{"constant_value":"80"},"request_path":{"constant_value":"/"}}],"name":{"constant_value":"lab-http-check"}},"schema_version":0},{"address":"google_compute_instance_group_manager.lab_mig","mode":"managed","type":"google_compute_instance_group_manager","name":"lab_mig","provider_config_key":"google","expressions":{"auto_healing_policies":[{"health_check":{"references":["google_compute_health_check.lab_health_check.id","google_compute_health_check.lab_health_check"]},"initial_delay_sec":{"constant_value":120}}],"base_instance_name":{"constant_value":"vm"},"name":{"constant_value":"lab-mig"},"named_port":[{"name":{"constant_value":"http"},"port":{"constant_value":80}}],"target_size":{"constant_value":2},"version":[{"instance_template":{"references":["google_compute_instance_template.lab_instance_template.self_link_unique","google_compute_instance_template.lab_instance_template"]}}],"zone":{"references":["var.lab-zone"]}},"schema_version":0},{"address":"google_compute_instance_template.lab_instance_template","mode":"managed","type":"google_compute_instance_template","name":"lab_instance_template","provider_config_key":"google","expressions":{"disk":[{"boot":{"constant_value":true},"mode":{"constant_value":"READ_WRITE"},"source_image":{"constant_value":"projects/debian-cloud/global/images/family/debian-11"},"type":{"constant_value":"PERSISTENT"}}],"machine_type":{"references":["var.machine-type"]},"metadata":{"constant_value":{"startup-script":"#! /bin/bash\n     sudo apt-get update\n     sudo apt-get install apache2 -y\n     sudo a2ensite default-ssl\n     sudo a2enmod ssl\n     vm_hostname=\"$(curl -H \"Metadata-Flavor:Google\" \\\n   http://169.254.169.254/computeMetadata/v1/instance/name)\"\n   sudo echo \"Page served from: $vm_hostname\" | \\\n   tee /var/www/html/index.html\n   sudo systemctl restart apache2"}},"name_prefix":{"references":["var.instance-prefix"]},"network_interface":[{"network":{"references":["module.vpc.vpc-id","module.vpc"]},"subnetwork":{"references":["module.vpc.lab-subnet","module.vpc"]}}],"tags":{"constant_value":["allow-health-check"]}},"schema_version":1},{"address":"google_compute_target_http_proxy.http_proxy","mode":"managed","type":"google_compute_target_http_proxy","name":"http_proxy","provider_config_key":"google","expressions":{"name":{"constant_value":"http-lb-proxy"},"url_map":{"references":["google_compute_url_map.http_url_map.id","google_compute_url_map.http_url_map"]}},"schema_version":0},{"address":"google_compute_url_map.http_url_map","mode":"managed","type":"google_compute_url_map","name":"http_url_map","provider_config_key":"google","expressions":{"default_service":{"references":["google_compute_backend_service.backend_service.id","google_compute_backend_service.backend_service"]},"name":{"constant_value":"url-map-target-proxy"}},"schema_version":0}],"module_calls":{"vpc":{"source":"./network","module":{"outputs":{"lab-subnet":{"expression":{"references":["google_compute_subnetwork.lab_subnet.id","google_compute_subnetwork.lab_subnet"]},"description":"id of lab subnet"},"lb-ip":{"expression":{"references":["google_compute_global_address.lab_lb_ip.address","google_compute_global_address.lab_lb_ip"]},"description":"ip of lab load balancer"},"lb-ip-id":{"expression":{"references":["google_compute_global_address.lab_lb_ip.id","google_compute_global_address.lab_lb_ip"]},"description":"ip id of lab load balancer"},"vpc-id":{"expression":{"references":["google_compute_network.lab_vpc.id","google_compute_network.lab_vpc"]},"description":"ID of the VPC"}},"resources":[{"address":"google_compute_firewall.default","mode":"managed","type":"google_compute_firewall","name":"default","provider_config_key":"google","expressions":{"allow":[{"ports":{"constant_value":["80"]},"protocol":{"constant_value":"tcp"}}],"direction":{"constant_value":"INGRESS"},"name":{"constant_value":"fw-allow-health-check"},"network":{"references":["google_compute_network.lab_vpc.id","google_compute_network.lab_vpc"]},"priority":{"constant_value":1000},"source_ranges":{"constant_value":["130.211.0.0/22","35.191.0.0/16"]},"target_tags":{"constant_value":["allow-health-check"]}},"schema_version":1},{"address":"google_compute_global_address.lab_lb_ip","mode":"managed","type":"google_compute_global_address","name":"lab_lb_ip","provider_config_key":"google","expressions":{"ip_version":{"constant_value":"IPV4"},"name":{"constant_value":"lb-ipv4-1"}},"schema_version":0},{"address":"google_compute_network.lab_vpc","mode":"managed","type":"google_compute_network","name":"lab_vpc","provider_config_key":"google","expressions":{"auto_create_subnetworks":{"constant_value":false},"name":{"constant_value":"lab-vpc"}},"schema_version":0},{"address":"google_compute_router.lab_router","mode":"managed","type":"google_compute_router","name":"lab_router","provider_config_key":"google","expressions":{"name":{"constant_value":"lab-router"},"network":{"references":["google_compute_network.lab_vpc.name","google_compute_network.lab_vpc"]},"region":{"constant_value":"us-east1"}},"schema_version":0},{"address":"google_compute_router_nat.nat","mode":"managed","type":"google_compute_router_nat","name":"nat","provider_config_key":"google","expressions":{"name":{"constant_value":"my-router-nat"},"nat_ip_allocate_option":{"constant_value":"AUTO_ONLY"},"region":{"references":["google_compute_router.lab_router.region","google_compute_router.lab_router"]},"router":{"references":["google_compute_router.lab_router.name","google_compute_router.lab_router"]},"source_subnetwork_ip_ranges_to_nat":{"constant_value":"ALL_SUBNETWORKS_ALL_IP_RANGES"}},"schema_version":0},{"address":"google_compute_subnetwork.lab_subnet","mode":"managed","type":"google_compute_subnetwork","name":"lab_subnet","provider_config_key":"google","expressions":{"ip_cidr_range":{"constant_value":"10.0.1.0/24"},"name":{"constant_value":"lab-subnet"},"network":{"references":["google_compute_network.lab_vpc.id","google_compute_network.lab_vpc"]},"region":{"constant_value":"us-east1"}},"schema_version":0}]}}},"variables":{"instance-prefix":{"default":"lab-template-"},"lab-project":{"default":"\u003cyour project id\u003e"},"lab-region":{"default":"us-east1"},"lab-zone":{"default":"us-east1-b"},"machine-type":{"default":"e2-small"}}}},"relevant_attributes":[{"resource":"google_compute_url_map.http_url_map","attribute":["id"]},{"resource":"module.vpc.google_compute_global_address.lab_lb_ip","attribute":["address"]},{"resource":"module.vpc.google_compute_network.lab_vpc","attribute":["name"]},{"resource":"module.vpc.google_compute_router.lab_router","attribute":["name"]},{"resource":"google_compute_instance_template.lab_instance_template","attribute":["self_link_unique"]},{"resource":"google_compute_health_check.lab_health_check","attribute":["id"]},{"resource":"google_compute_instance_group_manager.lab_mig","attribute":["instance_group"]},{"resource":"google_compute_backend_service.backend_service","attribute":["id"]},{"resource":"module.vpc.google_compute_network.lab_vpc","attribute":["id"]},{"resource":"module.vpc.google_compute_router.lab_router","attribute":["region"]},{"resource":"google_compute_target_http_proxy.http_proxy","attribute":["id"]},{"resource":"module.vpc.google_compute_global_address.lab_lb_ip","attribute":["id"]},{"resource":"module.vpc.google_compute_subnetwork.lab_subnet","attribute":["id"]}],"timestamp":"2026-01-08T14:53:19Z"}
